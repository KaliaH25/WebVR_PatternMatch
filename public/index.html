<!DOCTYPE html>
<html>
    <head>
        <title>Kalia Hameiri - IMD3901B A3 - WebVR Rubic's Cube</title>
        <script src="/js/aframe.min.js"></script> <!-- https://github.com/aframevr/aframe -->
    </head>
    <body>
        <a-scene shadow="type:basic;">
            <!-- Setting up camera and curser-->
            <a-entity position ="0 0 0" camera look-controls wasd-controls>
                <a-entity cursor ="fuse:true; fuseTimeOut:1000;rayOrigin:mouse;"
                    position="0 0 -1">                
                </a-entity>
            </a-entity>
            
            <!--Loading planes--> 
            <!--Left face--> 
            <a-entity class="F2 C5 R1">
                <a-plane id="cubel17" position="-3 2 -1.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff"></a-plane>
            </a-entity>  
            <a-entity class="F2 C5 R2">
                <a-plane  id="cubel16" position="-3 1 -1.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff"></a-plane>
            </a-entity>
            <a-entity class="F2 C5 R3">
                <a-plane  id="cubel18" position="-3 0 -1.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff"></a-plane>
            </a-entity>
            <a-entity class="F2 C5 R4">
                <a-plane  id="cubel18" position="-3 -1 -1.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff"></a-plane>
            </a-entity>
            <a-entity class="F2 C5 R5">
                <a-plane  id="cubel18" position="-3 -2 -1.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff"></a-plane>
            </a-entity>

            <a-entity class="F2 C6 R1"> 
                <a-plane  id="cubel11" position="-3 2 -0.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff"></a-plane>
            </a-entity>
            <a-entity class="F2 C6 R2">
                <a-plane  id="cubel10" position="-3 1 -0.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff" ></a-plane>
            </a-entity>
            <a-entity class="F2 C6 R3"> 
                <a-plane  id="cubel12" position="-3 0 -0.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff"></a-plane>
            </a-entity>
            <a-entity class="F2 C6 R4"> 
                <a-plane  id="cubel12" position="-3 -1 -0.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff"></a-plane>
            </a-entity>
            <a-entity class="F2 C6 R5"> 
                <a-plane  id="cubel12" position="-3 -2 -0.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff"></a-plane>
            </a-entity>
 
            <a-entity class="F2 C7 R1">
                <a-plane  id="cubel14" position="-3 2 0.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff"></a-plane>
            </a-entity>
            <a-entity class="F2 C7 R2">
                <a-plane  id="cubel13" position="-3 1 0.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff"></a-plane> 
            </a-entity> 
            <a-entity class="F2 C7 R3">
                <a-plane  id="cubel15" position="-3 0 0.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff" ></a-plane>
            </a-entity>
            <a-entity class="F2 C7 R4">
                <a-plane  id="cubel15" position="-3 -1 0.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff" ></a-plane>
            </a-entity>
            <a-entity class="F2 C7 R5">
                <a-plane  id="cubel15" position="-3 -2 0.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff" ></a-plane>
            </a-entity>
            
            <a-entity class="F2 C8 R1">
                <a-plane  id="cubel14" position="-3 2 1.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff"></a-plane>
            </a-entity>
            <a-entity class="F2 C8 R2">
                <a-plane  id="cubel13" position="-3 1 1.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff"></a-plane> 
            </a-entity> 
            <a-entity class="F2 C8 R3">
                <a-plane  id="cubel15" position="-3 0 1.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff" ></a-plane>
            </a-entity>
            <a-entity class="F2 C8 R4">
                <a-plane  id="cubel15" position="-3 -1 1.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff" ></a-plane>
            </a-entity>
            <a-entity class="F2 C8 R5">
                <a-plane  id="cubel15" position="-3 -2 1.5" width = "0.95" height="0.95" rotation = "0 90 0"  color="#0000ff" ></a-plane>
            </a-entity>
        
            <!--Front face--> 
            <a-entity class="F1 C1 R1">
                <a-plane  id="cubel8" position="-1.5 2 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity >
            <a-entity class="F1 C1 R2">
                <a-plane  id="cubel7" position="-1.5 1 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity >
            <a-entity class="F1 C1 R3">
                <a-plane  id="cubel9" position="-1.5 0 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>
            <a-entity class="F1 C1 R4">
                <a-plane  id="cubel9" position="-1.5 -1 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>
            <a-entity class="F1 C1 R5">
                <a-plane  id="cubel9" position="-1.5 -2 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>

            <a-entity class="F1 C2 R1">
                <a-plane  id="cubel2" position="-0.5 2 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>
            <a-entity class="F1 C2 R2">
                <a-plane id="cubel1" position="-0.5 1 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>
            <a-entity class="F1 C2 R3"> 
                <a-plane  id="cubel3" position="-0.5 0 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>
            <a-entity class="F1 C2 R4"> 
                <a-plane  id="cubel3" position="-0.5 -1 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>
            <a-entity class="F1 C2 R5"> 
                <a-plane  id="cubel3" position="-0.5 -2 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>
   
            <a-entity class="F1 C3 R1">  
                <a-plane  id="cubel5" position="0.5 2 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>
            <a-entity class="F1 C3 R2">
                <a-plane  id="cubel4" position="0.5 1 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>
            <a-entity class="F1 C3 R3">
                <a-plane  id="cubel6" position="0.5 0 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>
            <a-entity class="F1 C3 R4">
                <a-plane  id="cubel6" position="0.5 -1 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>
            <a-entity class="F1 C3 R5">
                <a-plane  id="cubel6" position="0.5 -2 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity> 

            <a-entity class="F1 C4 R1">  
                <a-plane  id="cubel5" position="1.5 2 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>
            <a-entity class="F1 C4 R2">
                <a-plane  id="cubel4" position="1.5 1 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>
            <a-entity class="F1 C4 R3">
                <a-plane  id="cubel6" position="1.5 0 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>
            <a-entity class="F1 C4 R4">
                <a-plane  id="cubel6" position="1.5 -1 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>
            <a-entity class="F1 C4 R5">
                <a-plane  id="cubel6" position="1.5 -2 -3" width = "0.95" height="0.95" rotation = "0 0 0"  color="#FF0000" ></a-plane>
            </a-entity>         
            
            
            <!-- Right face-->
            <a-entity class="F3 C5 R1">
                <a-plane  id="cubel26" position="3 2 -1.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00"></a-plane>
            </a-entity>
            <a-entity class="F3 C5 R2">
                <a-plane  id="cubel25" position="3 1 -1.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00"></a-plane>
            </a-entity>
            <a-entity class="F3 C5 R3">
                <a-plane  id="cubel27" position="3 0 -1.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00"></a-plane>
            </a-entity>
            <a-entity class="F3 C5 R4">
                <a-plane  id="cubel27" position="3 -1 -1.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00"></a-plane>
            </a-entity>
            <a-entity class="F3 C5 R5">
                <a-plane  id="cubel27" position="3 -2 -1.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00"></a-plane>
            </a-entity>

            <a-entity class="F3 C6 R1">
                <a-plane  id="cubel20" position="3 2 -0.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00"></a-plane>
            </a-entity>
            <a-entity class="F3 C6 R2">
                <a-plane  id="cubel19" position="3 1 -0.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00" ></a-plane>
            </a-entity>
            <a-entity class="F3 C6 R3">
                <a-plane  id="cubel21" position="3 0 -0.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00"></a-plane>
            </a-entity>
            <a-entity class="F3 C6 R4">
                <a-plane  id="cubel21" position="3 -1 -0.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00"></a-plane>
            </a-entity>
            <a-entity class="F3 C6 R5">
                <a-plane  id="cubel21" position="3 -2 -0.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00"></a-plane>
            </a-entity>

            <a-entity class="F3 C7 R1">
                <a-plane  id="cubel23" position="3 2 0.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00"></a-plane>
            </a-entity>
            <a-entity class="F3 C7 R2">
                <a-plane  id="cubel22" position="3 1 0.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00"></a-plane>
            </a-entity>
            <a-entity class="F3 C7 R3">
                <a-plane  id="cubel24" position="3 0 0.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00" ></a-plane>
            </a-entity>
            <a-entity class="F3 C7 R4">
                <a-plane  id="cubel24" position="3 -1 0.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00" ></a-plane>
            </a-entity>
            <a-entity class="F3 C7 R5">
                <a-plane  id="cubel24" position="3 -2 0.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00" ></a-plane>
            </a-entity>
                   
            <a-entity class="F3 C8 R1">
                <a-plane  id="cubel23" position="3 2 1.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00"></a-plane>
            </a-entity>
            <a-entity class="F3 C8 R2">
                <a-plane  id="cubel22" position="3 1 1.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00"></a-plane>
            </a-entity>
            <a-entity class="F3 C8 R3">
                <a-plane  id="cubel24" position="3 0 1.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00" ></a-plane>
            </a-entity>
            <a-entity class="F3 C8 R4">
                <a-plane  id="cubel24" position="3 -1 1.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00" ></a-plane>
            </a-entity>
            <a-entity class="F3 C8 R5">
                <a-plane  id="cubel24" position="3 -2 1.5" width = "0.95" height="0.95" rotation = "0 -90 0"  color="#00ff00" ></a-plane>
            </a-entity>
             
            <!--Back face--> 

            <a-entity class="F4 C1 R1">
                <a-plane  id="cubel35" position="-1.5 2 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>     
            </a-entity>
            <a-entity class="F4 C1 R2" >
                <a-plane  id="cubel34" position="-1.5 1 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>
            </a-entity >
            <a-entity class="F4 C1 R3">
                <a-plane  id="cubel36" position="-1.5 0 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>      
            </a-entity>
            <a-entity class="F4 C1 R4">
                <a-plane  id="cubel36" position="-1.5 -1 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>      
            </a-entity>
            <a-entity class="F4 C1 R5">
                <a-plane  id="cubel36" position="-1.5 -2 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>      
            </a-entity>
            
            <a-entity class="F4 C2 R1">
                <a-plane  id="cubel29" position="-0.5 2 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>
            </a-entity>
            <a-entity class="F4 C2 R2">
                <a-plane  id="cubel28" position="-0.5 1 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>
            </a-entity>
            <a-entity class="F4 C2 R3">
                <a-plane  id="cubel30" position="-0.5 0 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>
            </a-entity>
            <a-entity class="F4 C2 R4">
                <a-plane  id="cubel30" position="-0.5 -1 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>
            </a-entity>
            <a-entity class="F4 C2 R5">
                <a-plane  id="cubel30" position="-0.5 -2 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>
            </a-entity>
 
            <a-entity class="F4 C3 R1">
                <a-plane  id="cubel32" position="0.5 2 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>     
            </a-entity>
            <a-entity class="F4 C3 R2" >
                <a-plane  id="cubel31" position="0.5 1 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>
            </a-entity >
            <a-entity class="F4 C3 R3">
                <a-plane  id="cubel33" position="0.5 0 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>    
            </a-entity>
            <a-entity class="F4 C3 R4">
                <a-plane  id="cubel33" position="0.5 -1 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>    
            </a-entity>
            <a-entity class="F4 C3 R5">
                <a-plane  id="cubel33" position="0.5 -2 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>    
            </a-entity>

            <a-entity class="F4 C4 R1">
                <a-plane  id="cubel32" position="1.5 2 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>     
            </a-entity>
            <a-entity class="F4 C4 R2" >
                <a-plane  id="cubel31" position="1.5 1 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>
            </a-entity >
            <a-entity class="F4 C4 R3">
                <a-plane  id="cubel33" position="1.5 0 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>    
            </a-entity>
            <a-entity class="F4 C4 R4">
                <a-plane  id="cubel33" position="1.5 -1 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>    
            </a-entity>
            <a-entity class="F4 C4 R5">
                <a-plane  id="cubel33" position="1.5 -2 3" width = "0.95" height="0.95" rotation = "0 -180 0"  color="#ff7700" ></a-plane>    
            </a-entity>
            
            
                      
                 
            <a-sky color = "#000000"></a-sky> 
        </a-scene>    
        <script src='/socket.io/socket.io.js'></script>
        <script>
            //write some socket client code
            let socket = io();
            //built in event
            socket.on('connect',function(data){
                console.log('conneted!');
            });

            
            socket.on('rotate_row',function(data){
                console.log('row: '+ data.row + " direction: " + data.direction);
                let rowCubes = document.querySelectorAll(".R"+data.row);
                let cubeClasses = new Array(rowCubes.length);//make empty array of same length to save the class names 
                var i =0;
               
                rowCubes.forEach(function(cubel){  
                    cubel.object3D.rotation.y += THREE.Math.degToRad(90*data.direction);//rotate about Y
                    cubeClasses[i] = cubel.className;//save class name of cube
                    console.log(cubeClasses[i]);
                    i++;
                })
                //cubeClasses.sort();

                updateClassName(rowCubes,cubeClasses,data.direction*-1); 
               
            });

            function updateClassName(cubeList,classNameList,dir){
                //updates the class name of the cubel based on its current rotation
                var i =0;
                cubeList.forEach(function(cube){
                   // console.log('old: '+ cube.className);

                    j = i+(dir*3);//the cube always moves three positions over
                    if(j<0){
                        j+=classNameList.length;//rolls over value to end of array
                    }
                    else if(j>11){
                        j-=classNameList.length;//rolls over value to begining of array
                    
                    }
                    cube.className = classNameList[j]
                    console.log('new: '+ cube.className);
                    i++;
                })
            }
           
            
        </script>
    </body>
</html>